{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<header>
  <!-- Logo y nombre -->
  <a href="{% url 'home' %}" class="logo">
    <img src="{% static 'img/logo.png' %}" alt="Logo" class="logo-img">
    <span class="logo-text">EmprendeApp</span>
  </a>

  <!-- Barra de b煤squeda (solo en discover) -->
  {% if request.resolver_match.url_name == 'discover' %}
  <form method="GET" action="{% url 'discover' %}" class="search-bar">
    <input type="text" name="q" value="{{ query }}" placeholder="Buscar productos...">
    <button type="submit"><i class="fa-solid fa-search"></i></button>
  </form>
  {% else %}
  <div class="search-bar-placeholder"></div>
  {% endif %}

  <!-- Navegaci贸n -->
  <nav>
    <ul>
      <li><a href="{% url 'discover' %}"><i class="fa-solid fa-compass"></i> Descubrir</a></li>
      <li><a href="{% url 'tendencias' %}"><i class="fa-solid fa-fire"></i> Tendencia</a></li>
      <li><a href="#"><i class="fa-solid fa-gift"></i> Recompensas</a></li>
      
      {% if user.is_authenticated %}
      <li><a href="{% url 'agregar_producto' %}"><i class="fa-solid fa-plus-circle"></i> A帽adir Productos</a></li>
      {% endif %}
      
      {% if user.is_authenticated and user.perfil.es_admin %}
      <li class="icon-btn"><a href="/admin/" target="_blank"><i class="fa-solid fa-gear"></i></a></li>
      {% endif %}

      {% if user.is_authenticated %}
      <li>
        <a href="{% url 'logout' %}" class="signin-btn logout-btn">
          <i class="fa-solid fa-right-from-bracket"></i> Cerrar sesi贸n
        </a>
      </li>
      {% else %}
      <li>
        <a href="{% url 'login' %}" class="signin-btn">
          <i class="fa-solid fa-right-to-bracket"></i> Iniciar sesi贸n
        </a>
      </li>
      {% endif %}
    </ul>
  </nav>
</header>

<style>
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px 30px;
    background: linear-gradient(135deg, #036d4a, #0b8f65);
    color: white;
    flex-wrap: wrap;
  }

  /* Logo */
  .logo {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: white;
    font-weight: bold;
    font-size: 22px;
  }

  .logo-img {
    height: 45px;
    margin-right: 10px;
    transition: transform 0.3s ease;
  }

  .logo-img:hover {
    transform: scale(1.08);
  }

  .logo-text {
    font-size: 22px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  /* Buscador */
  .search-bar {
    flex: 1;
    max-width: 500px;
    margin: 10px 40px;
    display: flex;
    gap: 8px;
  }

  .search-bar input {
    flex: 1;
    padding: 10px 15px;
    border: none;
    border-radius: 25px;
    font-size: 14px;
    color: #333;
    background: white;
  }

  .search-bar input::placeholder {
    color: #999;
  }

  .search-bar button {
    background: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    color: #036d4a;
    font-size: 16px;
    transition: all 0.3s ease;
  }

  .search-bar button:hover {
    background: #d59e0c;
    color: white;
    transform: scale(1.1);
  }

  .search-bar-placeholder {
    flex: 1;
    max-width: 500px;
    margin: 10px 40px;
  }

  /* Navegaci贸n */
  nav ul {
    list-style: none;
    display: flex;
    gap: 20px;
    margin: 0;
    padding: 0;
    align-items: center;
  }

  nav ul li a {
    text-decoration: none;
    color: white;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* conos y animaciones */
  nav ul li a i {
    font-size: 18px;
    transition: transform 0.3s ease, color 0.3s ease;
  }

  nav ul li a:hover i {
    color: #d59e0c;
  }

  .fa-compass:hover { animation: zoom 0.6s ease-in-out forwards; }
  @keyframes zoom { 0%,100% { transform: scale(1); } 50% { transform: scale(1.3); } }

  .fa-fire:hover { animation: heartbeat 1s infinite; }
  @keyframes heartbeat { 0%,100% { transform: scale(1); } 25% { transform: scale(1.2); } 50% { transform: scale(0.9); } 75% { transform: scale(1.1); } }

  .fa-gift:hover { animation: bounce 0.8s ease infinite; }
  @keyframes bounce { 0%,100% { transform: translateY(0); } 30% { transform: translateY(-8px); } 60% { transform: translateY(-4px); } }

  .fa-plus-circle:hover { animation: rotate-pulse 0.8s ease-in-out infinite; }
  @keyframes rotate-pulse { 0%,100% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.2); } }

  .fa-gear:hover { animation: spin 2s linear infinite; color: #d59e0c; }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

  /* Botones */
  .signin-btn {
    background: #0b8f65;
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    text-decoration: none;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.3s ease;
  }

  .signin-btn:hover {
    background: #036d4a;
    color: white;
  }

  .logout-btn {
    background: #d9534f !important;
    color: white !important;
  }

  .icon-btn {
    border-left: 1px solid rgba(255,255,255,0.3);
    padding-left: 15px;
  }

  /*  Responsive */
  @media (max-width: 900px) {
    header {
      flex-direction: column;
      align-items: stretch;
    }
    .search-bar {
      max-width: 100%;
      margin: 10px 0;
    }
    nav ul {
      justify-content: center;
      flex-wrap: wrap;
    }
  }
</style>
